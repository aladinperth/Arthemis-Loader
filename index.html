<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>ONYX</title>
   <style>
       @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
       @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css');

       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
       }

       html {
           scroll-behavior: smooth;
       }

       body {
           background: #0a0a0a;
           font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
           color: #ffffff;
           min-height: 100vh;
           position: relative;
           overflow-x: hidden;
           line-height: 1.6;
       }

       body::before {
           content: '';
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background: 
               radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.15) 0%, transparent 50%),
               radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
               radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.15) 0%, transparent 50%);
           animation: backgroundShift 20s ease-in-out infinite;
           pointer-events: none;
           z-index: 0;
       }

       @keyframes backgroundShift {
           0%, 100% { opacity: 0.3; transform: rotate(0deg) scale(1); }
           33% { opacity: 0.5; transform: rotate(120deg) scale(1.1); }
           66% { opacity: 0.4; transform: rotate(240deg) scale(0.9); }
       }

       .stars {
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           pointer-events: none;
           z-index: 1;
       }

       .star {
           position: absolute;
           width: 2px;
           height: 2px;
           background: rgba(255, 255, 255, 0.8);
           border-radius: 50%;
           animation: twinkle 4s ease-in-out infinite;
       }

       .star:nth-child(odd) {
           animation-duration: 3s;
       }

       .star:nth-child(3n) {
           animation-duration: 5s;
       }

       @keyframes twinkle {
           0%, 100% { 
               opacity: 0.2; 
               transform: scale(0.5) rotate(0deg); 
               box-shadow: 0 0 0px rgba(255, 255, 255, 0.5);
           }
           50% { 
               opacity: 1; 
               transform: scale(1.2) rotate(180deg); 
               box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
           }
       }

       .shooting-star {
           position: absolute;
           width: 100px;
           height: 2px;
           background: linear-gradient(90deg, transparent, #fff, transparent);
           border-radius: 50px;
           animation: shoot 8s linear infinite;
           opacity: 0;
       }

       @keyframes shoot {
           0% {
               opacity: 0;
               transform: translateX(-100px) translateY(0) rotate(45deg);
           }
           10% {
               opacity: 1;
           }
           90% {
               opacity: 1;
           }
           100% {
               opacity: 0;
               transform: translateX(calc(100vw + 100px)) translateY(100px) rotate(45deg);
           }
       }

       .container {
           position: relative;
           z-index: 2;
           padding: 40px 20px;
           min-height: 100vh;
           display: flex;
           flex-direction: column;
           max-width: 1200px;
           margin: 0 auto;
       }

       .header {
           display: flex;
           justify-content: space-between;
           align-items: center;
           margin-bottom: 80px;
           animation: slideInDown 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
           backdrop-filter: blur(20px);
           background: rgba(255, 255, 255, 0.02);
           padding: 20px 30px;
           border-radius: 20px;
           border: 1px solid rgba(255, 255, 255, 0.1);
           transition: all 0.3s ease;
       }

       .header:hover {
           transform: translateY(-2px);
           box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
           border-color: rgba(255, 255, 255, 0.2);
       }

       @keyframes slideInDown {
           from {
               opacity: 0;
               transform: translateY(-50px) scale(0.9);
           }
           to {
               opacity: 1;
               transform: translateY(0) scale(1);
           }
       }

       .logo {
           font-size: 2rem;
           font-weight: 700;
           letter-spacing: 3px;
           background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
           background-size: 200% 200%;
           -webkit-background-clip: text;
           background-clip: text;
           -webkit-text-fill-color: transparent;
           animation: logoShine 3s ease-in-out infinite;
           position: relative;
           cursor: pointer;
           transition: all 0.3s ease;
       }

       .logo::after {
           content: '';
           position: absolute;
           top: 0;
           left: 0;
           right: 0;
           bottom: 0;
           background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
           opacity: 0;
           filter: blur(20px);
           transition: opacity 0.3s ease;
           z-index: -1;
       }

       .logo:hover::after {
           opacity: 0.5;
       }

       .logo:hover {
           transform: scale(1.05);
       }

       @keyframes logoShine {
           0%, 100% { background-position: 0% 50%; }
           50% { background-position: 100% 50%; }
       }

       .buttons {
           display: flex;
           gap: 15px;
           animation: slideInRight 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.3s both;
       }

       @keyframes slideInRight {
           from {
               opacity: 0;
               transform: translateX(50px) scale(0.8);
           }
           to {
               opacity: 1;
               transform: translateX(0) scale(1);
           }
       }

       .btn {
           padding: 12px 20px;
           border-radius: 15px;
           border: none;
           font-size: 0.9rem;
           font-weight: 600;
           cursor: pointer;
           transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
           position: relative;
           overflow: hidden;
           text-decoration: none;
           display: inline-flex;
           align-items: center;
           justify-content: center;
           backdrop-filter: blur(10px);
           border: 1px solid rgba(255, 255, 255, 0.1);
           transform-style: preserve-3d;
       }

       .btn::before {
           content: '';
           position: absolute;
           top: 0;
           left: -100%;
           width: 100%;
           height: 100%;
           background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
           transition: left 0.8s ease;
       }

       .btn:hover::before {
           left: 100%;
       }

       .btn:hover {
           transform: translateY(-3px) rotateX(10deg) rotateY(5deg);
           box-shadow: 
               0 15px 35px rgba(0,0,0,0.4),
               0 5px 15px rgba(255,255,255,0.1);
       }

       .btn:active {
           transform: translateY(-1px) rotateX(5deg);
       }

       .discord-btn {
           background: linear-gradient(135deg, #5865f2 0%, #4752c4 100%);
           color: white;
           width: 50px;
           height: 50px;
           border-radius: 50%;
           padding: 0;
       }

       .discord-btn:hover {
           background: linear-gradient(135deg, #4752c4 0%, #3c4399 100%);
           box-shadow: 
               0 15px 35px rgba(88,101,242,0.4),
               0 5px 15px rgba(88,101,242,0.2);
           transform: translateY(-5px) rotateX(15deg) scale(1.1);
       }

       .discord-btn i {
           font-size: 1.2rem;
       }

       .copy-btn {
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           color: white;
       }

       .copy-btn:hover {
           background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
           box-shadow: 
               0 15px 35px rgba(102,126,234,0.4),
               0 5px 15px rgba(102,126,234,0.2);
       }

       .raw-btn {
           background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
           color: white;
       }

       .raw-btn:hover {
           background: linear-gradient(135deg, #ee82f0 0%, #f44461 100%);
           box-shadow: 
               0 15px 35px rgba(240,147,251,0.4),
               0 5px 15px rgba(240,147,251,0.2);
       }

       .download-btn {
           background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
           color: white;
       }

       .download-btn:hover {
           background: linear-gradient(135deg, #3d8bfe 0%, #00d4e7 100%);
           box-shadow: 
               0 15px 35px rgba(79,172,254,0.4),
               0 5px 15px rgba(79,172,254,0.2);
       }

       .main-content {
           flex: 1;
           display: flex;
           flex-direction: column;
           align-items: center;
           justify-content: center;
           text-align: center;
           margin-top: -120px;
       }

       .welcome {
           font-size: 5rem;
           font-weight: 300;
           margin-bottom: 30px;
           animation: fadeInUp 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.5s both;
           background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
           -webkit-background-clip: text;
           background-clip: text;
           -webkit-text-fill-color: transparent;
           position: relative;
           cursor: default;
       }

       .welcome::after {
           content: 'Welcome';
           position: absolute;
           top: 0;
           left: 0;
           background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
           -webkit-background-clip: text;
           background-clip: text;
           -webkit-text-fill-color: transparent;
           opacity: 0;
           transition: opacity 0.5s ease;
       }

       .welcome:hover::after {
           opacity: 1;
       }

       @keyframes fadeInUp {
           from {
               opacity: 0;
               transform: translateY(50px) scale(0.9);
           }
           to {
               opacity: 1;
               transform: translateY(0) scale(1);
           }
       }

       .time {
           font-size: 2rem;
           color: #e0e0e0;
           margin-bottom: 15px;
           animation: fadeInUp 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.7s both;
           font-weight: 300;
           letter-spacing: 1px;
       }

       .date {
           font-size: 1.1rem;
           color: #a0a0a0;
           margin-bottom: 80px;
           animation: fadeInUp 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.9s both;
           font-weight: 400;
       }

       .code-section {
           width: 100%;
           max-width: 900px;
           background: rgba(20, 20, 20, 0.8);
           border-radius: 20px;
           padding: 0;
           backdrop-filter: blur(20px);
           border: 1px solid rgba(255, 255, 255, 0.1);
           animation: fadeInUp 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 1.1s both;
           transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
           transform-style: preserve-3d;
           perspective: 1000px;
           position: relative;
           overflow: hidden;
       }

       .code-section::before {
           content: '';
           position: absolute;
           top: 0;
           left: 0;
           right: 0;
           bottom: 0;
           background: linear-gradient(135deg, 
               rgba(102, 126, 234, 0.05) 0%, 
               rgba(118, 75, 162, 0.05) 50%, 
               rgba(240, 147, 251, 0.05) 100%);
           opacity: 0;
           transition: opacity 0.5s ease;
           pointer-events: none;
       }

       .code-section:hover::before {
           opacity: 1;
       }

       .code-section:hover {
           transform: translateY(-10px) rotateX(5deg) rotateY(2deg);
           box-shadow: 
               0 30px 60px rgba(0, 0, 0, 0.4),
               0 10px 30px rgba(102, 126, 234, 0.2),
               inset 0 1px 0 rgba(255, 255, 255, 0.1);
           border-color: rgba(255, 255, 255, 0.3);
       }

       .code-header {
           display: flex;
           align-items: center;
           padding: 20px 25px;
           border-bottom: 1px solid rgba(255, 255, 255, 0.1);
           background: rgba(30, 30, 30, 0.6);
           border-radius: 20px 20px 0 0;
           transition: all 0.3s ease;
       }

       .code-section:hover .code-header {
           background: rgba(40, 40, 40, 0.8);
       }

       .file-indicator {
           width: 12px;
           height: 12px;
           background: #00ff88;
           border-radius: 50%;
           margin-right: 12px;
           animation: pulse 2s ease-in-out infinite;
           box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
       }

       @keyframes pulse {
           0%, 100% { 
               opacity: 1; 
               transform: scale(1);
               box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
           }
           50% { 
               opacity: 0.7; 
               transform: scale(1.1);
               box-shadow: 0 0 20px rgba(0, 255, 136, 0.8);
           }
       }

       .file-name {
           font-size: 1rem;
           color: #e0e0e0;
           font-weight: 500;
           letter-spacing: 0.5px;
       }

       .monaco-editor {
           height: 500px;
           border-radius: 0 0 20px 20px;
           overflow: hidden;
       }

       .loading-indicator {
           display: flex;
           flex-direction: column;
           align-items: center;
           justify-content: center;
           height: 500px;
           color: #a0a0a0;
       }

       .spinner {
           width: 50px;
           height: 50px;
           border: 3px solid rgba(255, 255, 255, 0.1);
           border-top: 3px solid #667eea;
           border-radius: 50%;
           animation: spin 1s linear infinite;
           margin-bottom: 20px;
       }

       @keyframes spin {
           0% { transform: rotate(0deg); }
           100% { transform: rotate(360deg); }
       }

       .loading-text {
           font-size: 1.1rem;
           animation: fadeInOut 2s ease-in-out infinite;
       }

       @keyframes fadeInOut {
           0%, 100% { opacity: 0.5; }
           50% { opacity: 1; }
       }

       .copied-notification {
           position: fixed;
           top: 30px;
           right: 30px;
           background: rgba(255, 255, 255, 0.95);
           color: #333;
           padding: 15px 25px;
           border-radius: 15px;
           font-weight: 600;
           font-size: 0.95rem;
           opacity: 0;
           transform: translateX(150px) scale(0.8);
           transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
           z-index: 1000;
           backdrop-filter: blur(10px);
           border: 1px solid rgba(0, 0, 0, 0.1);
           box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
       }

       .copied-notification.show {
           opacity: 1;
           transform: translateX(0) scale(1);
       }

       .floating-elements {
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           pointer-events: none;
           z-index: 1;
       }

       .floating-circle {
           position: absolute;
           border-radius: 50%;
           background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(240, 147, 251, 0.1));
           animation: float 20s linear infinite;
       }

       @keyframes float {
           0% {
               transform: translateY(100vh) rotate(0deg);
               opacity: 0;
           }
           10% {
               opacity: 1;
           }
           90% {
               opacity: 1;
           }
           100% {
               transform: translateY(-100px) rotate(360deg);
               opacity: 0;
           }
       }

       .error-message {
           color: #ff6b6b;
           font-size: 1.1rem;
           text-align: center;
           padding: 20px;
       }

       @media (max-width: 768px) {
           .welcome {
               font-size: 3rem;
           }
           
           .time {
               font-size: 1.5rem;
           }
           
           .buttons {
               flex-wrap: wrap;
               justify-content: center;
               gap: 10px;
           }
           
           .code-section {
               margin: 0 10px;
               max-width: calc(100vw - 20px);
           }
           
           .header {
               flex-direction: column;
               gap: 20px;
               text-align: center;
               padding: 15px 20px;
           }
           
           .monaco-editor {
               height: 400px;
           }
           
           .container {
               padding: 20px 10px;
           }
       }

       @media (max-width: 480px) {
           .welcome {
               font-size: 2.5rem;
           }
           
           .logo {
               font-size: 1.5rem;
               letter-spacing: 2px;
           }
           
           .btn {
               padding: 10px 15px;
               font-size: 0.85rem;
           }
           
           .discord-btn {
               width: 45px;
               height: 45px;
           }
       }

       @keyframes glow {
           0%, 100% {
               text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
           }
           50% {
               text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
           }
       }

       .welcome:hover {
           animation: glow 2s ease-in-out infinite;
       }

       .particle-trail {
           position: absolute;
           width: 4px;
           height: 4px;
           background: radial-gradient(circle, rgba(102, 126, 234, 0.8), transparent);
           border-radius: 50%;
           pointer-events: none;
           animation: particleFade 1s ease-out forwards;
       }

       @keyframes particleFade {
           0% {
               opacity: 1;
               transform: scale(1);
           }
           100% {
               opacity: 0;
               transform: scale(0);
           }
       }

       body {
           cursor: none;
       }

       .custom-cursor {
           position: fixed;
           width: 20px;
           height: 20px;
           background: radial-gradient(circle, rgba(102, 126, 234, 0.6), transparent);
           border-radius: 50%;
           pointer-events: none;
           z-index: 9999;
           transition: transform 0.1s ease;
           mix-blend-mode: difference;
       }

       .custom-cursor.clicked {
           transform: scale(0.8);
       }
   </style>
</head>
<body>
   <div class="custom-cursor"></div>
   <div class="stars"></div>
   <div class="floating-elements"></div>
   
   <div class="container">
       <div class="header">
           <div class="logo">ONYX</div>
           <div class="buttons">
               <a href="https://discord.gg/9F56J8UK4y" target="_blank" class="btn discord-btn" title="Join Discord">
                   <i class="fab fa-discord"></i>
               </a>
               <button class="btn copy-btn" onclick="copyCode()" title="Copy Code">Copy</button>
               <a href="https://raw.githubusercontent.com/aladinperth/onyx-loader/refs/heads/main/loader.lua" target="_blank" class="btn raw-btn" title="View Raw">Raw</a>
               <a href="https://raw.githubusercontent.com/aladinperth/onyx-loader/refs/heads/main/loader.lua" download="loader.lua" class="btn download-btn" title="Download">Download</a>
           </div>
       </div>

       <div class="main-content">
           <h1 class="welcome">Welcome</h1>
           <div class="time" id="currentTime">01:15:21 PM</div>
           <div class="date" id="currentDate">Wednesday, June 18, 2025</div>

           <div class="code-section">
               <div class="code-header">
                   <div class="file-indicator"></div>
                   <span class="file-name">loader.lua</span>
               </div>
               <div id="editor" class="monaco-editor">
                   <div class="loading-indicator">
                       <div class="spinner"></div>
                       <div class="loading-text">Loading code from GitHub...</div>
                   </div>
               </div>
           </div>
       </div>
   </div>

   <div class="copied-notification" id="copiedNotification">
       <i class="fas fa-check" style="margin-right: 8px;"></i>
       Copied to clipboard!
   </div>

   <script src="https://unpkg.com/monaco-editor@0.44.0/min/vs/loader.js"></script>
   <script>
       let editorInstance;
       let luaCode = '';
       let isLoading = true;

       // Custom cursor
       const cursor = document.querySelector('.custom-cursor');
       let mouseX = 0, mouseY = 0;

       document.addEventListener('mousemove', (e) => {
           mouseX = e.clientX;
           mouseY = e.clientY;
           cursor.style.left = mouseX + 'px';
           cursor.style.top = mouseY + 'px';
           
           // Create particle trail
           if (Math.random() > 0.8) {
               createParticleTrail(mouseX, mouseY);
           }
       });

       document.addEventListener('mousedown', () => {
           cursor.classList.add('clicked');
       });

       document.addEventListener('mouseup', () => {
           cursor.classList.remove('clicked');
       });

       function createParticleTrail(x, y) {
           const particle = document.createElement('div');
           particle.className = 'particle-trail';
           particle.style.left = x + 'px';
           particle.style.top = y + 'px';
           document.body.appendChild(particle);
           
           setTimeout(() => {
               document.body.removeChild(particle);
           }, 1000);
       }

       // Stars creation
       function createStars() {
           const starsContainer = document.querySelector('.stars');
           const starCount = 150;
           
           for (let i = 0; i < starCount; i++) {
               const star = document.createElement('div');
               star.className = 'star';
               star.style.left = Math.random() * 100 + '%';
               star.style.top = Math.random() * 100 + '%';
               star.style.animationDelay = Math.random() * 4 + 's';
               star.style.animationDuration = (Math.random() * 3 + 2) + 's';
               
               if (Math.random() > 0.9) {
                   star.style.width = '3px';
                   star.style.height = '3px';
               }
               
               starsContainer.appendChild(star);
           }

           // Add shooting stars
           for (let i = 0; i < 3; i++) {
               const shootingStar = document.createElement('div');
               shootingStar.className = 'shooting-star';
               shootingStar.style.top = Math.random() * 50 + '%';
               shootingStar.style.animationDelay = Math.random() * 8 + 's';
               starsContainer.appendChild(shootingStar);
           }
       }

       // Floating elements
       function createFloatingElements() {
           const container = document.querySelector('.floating-elements');
           const elementCount = 20;
           
           for (let i = 0; i < elementCount; i++) {
               const element = document.createElement('div');
               element.className = 'floating-circle';
               
               const size = Math.random() * 100 + 20;
               element.style.width = size + 'px';
               element.style.height = size + 'px';
               element.style.left = Math.random() * 100 + '%';
               element.style.animationDelay = Math.random() * 20 + 's';
               element.style.animationDuration = (Math.random() * 15 + 15) + 's';
               
               container.appendChild(element);
           }
       }

       // Monaco Editor setup
       require.config({ 
           paths: { 
               vs: 'https://unpkg.com/monaco-editor@0.44.0/min/vs' 
           },
           'vs/nls': {
               availableLanguages: {
                   '*': 'en'
               }
           }
       });

       require(['vs/editor/editor.main'], function () {
           // CORS proxy for GitHub raw content
           const proxyUrl = 'https://api.allorigins.win/get?url=';
           const targetUrl = 'https://raw.githubusercontent.com/aladinperth/onyx-loader/refs/heads/main/loader.lua';
           
           fetch(proxyUrl + encodeURIComponent(targetUrl))
               .then(response => {
                   if (!response.ok) {
                       throw new Error('Network response was not ok');
                   }
                   return response.json();
               })
               .then(data => {
                   luaCode = data.contents;
                   isLoading = false;
                   
                   // Clear loading indicator
                   document.getElementById('editor').innerHTML = '';
                   
                   editorInstance = monaco.editor.create(document.getElementById('editor'), {
                       value: luaCode,
                       language: 'lua',
                       theme: 'vs-dark',
                       readOnly: true,
                       minimap: { enabled: false },
                       scrollBeyondLastLine: false,
                       fontSize: 14,
                       lineNumbers: 'on',
                       automaticLayout: true,
                       scrollbar: {
                           vertical: 'auto',
                           horizontal: 'auto',
                           verticalScrollbarSize: 10,
                           horizontalScrollbarSize: 10
                       },
                       renderLineHighlight: 'gutter',
                       cursorBlinking: 'smooth',
                       fontFamily: 'Monaco, Menlo, "Ubuntu Mono", monospace',
                       lineHeight: 1.6,
                       padding: { top: 20, bottom: 20 }
                   });

                   // Add loading complete animation
                   document.querySelector('.code-section').style.animation = 'none';
                   setTimeout(() => {
                     document.querySelector('.code-section').style.animation = 'fadeInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                   }, 100);
               })
               .catch(error => {
                   console.error('Error fetching code:', error);
                   isLoading = false;
                   
                   // Try direct fetch as fallback
                   fetch('https://raw.githubusercontent.com/aladinperth/onyx-loader/refs/heads/main/loader.lua')
                       .then(response => {
                           if (!response.ok) {
                               throw new Error('Direct fetch failed');
                           }
                           return response.text();
                       })
                       .then(code => {
                           luaCode = code;
                           document.getElementById('editor').innerHTML = '';
                           
                           editorInstance = monaco.editor.create(document.getElementById('editor'), {
                               value: luaCode,
                               language: 'lua',
                               theme: 'vs-dark',
                               readOnly: true,
                               minimap: { enabled: false },
                               scrollBeyondLastLine: false,
                               fontSize: 14,
                               lineNumbers: 'on',
                               automaticLayout: true,
                               scrollbar: {
                                   vertical: 'auto',
                                   horizontal: 'auto',
                                   verticalScrollbarSize: 10,
                                   horizontalScrollbarSize: 10
                               },
                               renderLineHighlight: 'gutter',
                               cursorBlinking: 'smooth',
                               fontFamily: 'Monaco, Menlo, "Ubuntu Mono", monospace',
                               lineHeight: 1.6,
                               padding: { top: 20, bottom: 20 }
                           });
                       })
                       .catch(fallbackError => {
                           console.error('Both fetch methods failed:', fallbackError);
                           document.getElementById('editor').innerHTML = `
                               <div class="error-message">
                                   <i class="fas fa-exclamation-triangle" style="margin-right: 10px;"></i>
                                   Failed to load code from GitHub. Please try refreshing the page.
                               </div>
                           `;
                           luaCode = '-- Failed to load code from GitHub repository';
                       });
               });
       });

       // Time updates
       function updateTime() {
           const now = new Date();
           const timeElement = document.getElementById('currentTime');
           const dateElement = document.getElementById('currentDate');
           
           const timeOptions = {
               hour: '2-digit',
               minute: '2-digit',
               second: '2-digit',
               hour12: true
           };
           
           const dateOptions = {
               weekday: 'long',
               year: 'numeric',
               month: 'long',
               day: 'numeric'
           };
           
           const timeString = now.toLocaleTimeString('en-US', timeOptions);
           const dateString = now.toLocaleDateString('en-US', dateOptions);
           
           // Animate time change
           if (timeElement.textContent !== timeString) {
               timeElement.style.transform = 'scale(1.05)';
               timeElement.textContent = timeString;
               setTimeout(() => {
                   timeElement.style.transform = 'scale(1)';
               }, 200);
           }
           
           dateElement.textContent = dateString;
       }

       // Copy functionality
       function copyCode() {
           if (!luaCode || isLoading) {
               showNotification('Still loading code...', 'warning');
               return;
           }
           
           navigator.clipboard.writeText(luaCode).then(() => {
               showNotification('Copied to clipboard!', 'success');
               
               // Add success animation to copy button
               const copyBtn = document.querySelector('.copy-btn');
               copyBtn.style.transform = 'scale(0.95)';
               copyBtn.style.background = 'linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)';
               
               setTimeout(() => {
                   copyBtn.style.transform = '';
                   copyBtn.style.background = '';
               }, 300);
           }).catch(err => {
               console.error('Failed to copy: ', err);
               showNotification('Failed to copy code', 'error');
           });
       }

       // Enhanced notification system
       function showNotification(message, type = 'success') {
           const notification = document.getElementById('copiedNotification');
           const icon = notification.querySelector('i');
           
           // Update content based on type
           switch(type) {
               case 'success':
                   icon.className = 'fas fa-check';
                   notification.style.background = 'rgba(0, 255, 136, 0.95)';
                   notification.style.color = '#fff';
                   break;
               case 'warning':
                   icon.className = 'fas fa-exclamation-triangle';
                   notification.style.background = 'rgba(255, 193, 7, 0.95)';
                   notification.style.color = '#333';
                   break;
               case 'error':
                   icon.className = 'fas fa-times';
                   notification.style.background = 'rgba(255, 107, 107, 0.95)';
                   notification.style.color = '#fff';
                   break;
           }
           
           notification.innerHTML = `<i class="${icon.className}" style="margin-right: 8px;"></i>${message}`;
           notification.classList.add('show');
           
           setTimeout(() => {
               notification.classList.remove('show');
           }, 3000);
       }

       // Enhanced button interactions
       function setupButtonAnimations() {
           document.querySelectorAll('.btn').forEach(btn => {
               btn.addEventListener('mouseenter', function() {
                   this.style.transform = 'translateY(-5px) rotateX(15deg) rotateY(5deg)';
                   
                   // Add glow effect
                   if (this.classList.contains('discord-btn')) {
                       this.style.boxShadow = `
                           0 20px 40px rgba(88,101,242,0.4),
                           0 10px 20px rgba(88,101,242,0.3),
                           inset 0 1px 0 rgba(255,255,255,0.2)
                       `;
                   }
               });
               
               btn.addEventListener('mouseleave', function() {
                   this.style.transform = '';
                   this.style.boxShadow = '';
               });
               
               btn.addEventListener('mousedown', function() {
                   this.style.transform = 'translateY(-2px) rotateX(5deg) scale(0.98)';
               });
               
               btn.addEventListener('mouseup', function() {
                   this.style.transform = 'translateY(-5px) rotateX(15deg) rotateY(5deg)';
               });
           });
       }

       // Parallax effect for elements
       function setupParallax() {
           document.addEventListener('mousemove', (e) => {
               const mouseX = e.clientX / window.innerWidth;
               const mouseY = e.clientY / window.innerHeight;
               
               // Logo parallax
               const logo = document.querySelector('.logo');
               logo.style.transform = `translate(${mouseX * 10}px, ${mouseY * 10}px)`;
               
               // Welcome text parallax
               const welcome = document.querySelector('.welcome');
               welcome.style.transform = `translate(${mouseX * -5}px, ${mouseY * -5}px)`;
               
               // Code section subtle movement
               const codeSection = document.querySelector('.code-section');
               if (!codeSection.matches(':hover')) {
                   codeSection.style.transform = `translate(${mouseX * 3}px, ${mouseY * 3}px)`;
               }
               
               // Stars movement
               document.querySelectorAll('.star').forEach((star, index) => {
                   const speed = 0.5 + (index % 3) * 0.2;
                   star.style.transform = `translate(${mouseX * speed}px, ${mouseY * speed}px)`;
               });
           });
       }

       // Intersection Observer for animations
       function setupIntersectionObserver() {
           const observer = new IntersectionObserver((entries) => {
               entries.forEach(entry => {
                   if (entry.isIntersecting) {
                       entry.target.style.animationPlayState = 'running';
                       
                       // Add stagger effect for buttons
                       if (entry.target.classList.contains('buttons')) {
                           const buttons = entry.target.querySelectorAll('.btn');
                           buttons.forEach((btn, index) => {
                               btn.style.animationDelay = `${1.2 + index * 0.1}s`;
                           });
                       }
                   }
               });
           }, { threshold: 0.1 });

           document.querySelectorAll('.header, .welcome, .time, .date, .code-section, .buttons').forEach(el => {
               observer.observe(el);
           });
       }

       // Smooth scroll for any internal links
       function setupSmoothScroll() {
           document.querySelectorAll('a[href^="#"]').forEach(anchor => {
               anchor.addEventListener('click', function (e) {
                   e.preventDefault();
                   const target = document.querySelector(this.getAttribute('href'));
                   if (target) {
                       target.scrollIntoView({
                           behavior: 'smooth',
                           block: 'start'
                       });
                   }
               });
           });
       }

       // Keyboard shortcuts
       function setupKeyboardShortcuts() {
           document.addEventListener('keydown', (e) => {
               // Ctrl/Cmd + C to copy
               if ((e.ctrlKey || e.metaKey) && e.key === 'c' && !editorInstance?.hasTextFocus()) {
                   e.preventDefault();
                   copyCode();
               }
               
               // Ctrl/Cmd + R to refresh code
               if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
                   e.preventDefault();
                   location.reload();
               }
               
               // ESC to close any notifications
               if (e.key === 'Escape') {
                   document.getElementById('copiedNotification').classList.remove('show');
               }
           });
       }

       // Performance optimization
       function debounce(func, wait) {
           let timeout;
           return function executedFunction(...args) {
               const later = () => {
                   clearTimeout(timeout);
                   func(...args);
               };
               clearTimeout(timeout);
               timeout = setTimeout(later, wait);
           };
       }

       // Resize handler
       const handleResize = debounce(() => {
           if (editorInstance) {
               editorInstance.layout();
           }
       }, 250);

       // Initialize everything
       function init() {
           createStars();
           createFloatingElements();
           updateTime();
           setupButtonAnimations();
           setupParallax();
           setupIntersectionObserver();
           setupSmoothScroll();
           setupKeyboardShortcuts();
           
           // Set up intervals
           setInterval(updateTime, 1000);
           
           // Event listeners
           window.addEventListener('resize', handleResize);
           
           // Add loading complete class to body
           setTimeout(() => {
               document.body.classList.add('loaded');
           }, 2000);
           
           // Preload critical resources
           const link = document.createElement('link');
           link.rel = 'preload';
           link.href = 'https://unpkg.com/monaco-editor@0.44.0/min/vs/editor/editor.main.js';
           link.as = 'script';
           document.head.appendChild(link);
       }

       // Start the application when DOM is ready
       if (document.readyState === 'loading') {
           document.addEventListener('DOMContentLoaded', init);
       } else {
           init();
       }

       // Service Worker for caching (optional performance enhancement)
       if ('serviceWorker' in navigator) {
           window.addEventListener('load', () => {
               navigator.serviceWorker.register('/sw.js').catch(() => {
                   // Silently fail if no service worker
               });
           });
       }

       // Add Easter egg
       let konamiCode = [];
       const konami = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65]; // Up Up Down Down Left Right Left Right B A
       
       document.addEventListener('keydown', (e) => {
           konamiCode.push(e.keyCode);
           if (konamiCode.length > konami.length) {
               konamiCode.shift();
           }
           
           if (konamiCode.toString() === konami.toString()) {
               // Easter egg activated
               document.body.style.filter = 'hue-rotate(180deg)';
               showNotification('🎉 Easter egg activated!', 'success');
               setTimeout(() => {
                   document.body.style.filter = '';
               }, 5000);
               konamiCode = [];
           }
       });

       // Console art
       console.log(`
       ╔═══════════════════════════════════════╗
       ║                                       ║
       ║            🚀 ONYX LOADER 🚀          ║
       ║                                       ║
       ║         Made with ❤️ and ☕           ║
       ║                                       ║
       ║    🎯 Features:                       ║
       ║    • Beautiful animations             ║
       ║    • Monaco Editor integration        ║
       ║    • Real-time GitHub sync            ║
       ║    • Custom cursor effects            ║
       ║    • Responsive design                ║
       ║    • Smooth interactions              ║
       ║                                       ║
       ║    💡 Shortcuts:                      ║
       ║    • Ctrl+C: Copy code                ║
       ║    • Ctrl+R: Refresh                  ║
       ║    • ESC: Close notifications         ║
       ║                                       ║
       ╚═══════════════════════════════════════╝
       `);
   </script>
</body>
</html>
